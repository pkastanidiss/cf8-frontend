<div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; align-items: flex-start; padding: 20px;">
    
    <mat-card *ngFor="let note of notes" 
              (click)="openNote(note)" 
              style="width: 340px; height: auto; display: flex; flex-direction: column; border-radius: 12px; overflow: hidden; cursor: pointer; border: 1px solid #eee; transition: all 0.3s ease;">
      
      <mat-card-header style="padding: 16px;">
        <div mat-card-avatar class="author-avatar">
          <span class="avatar-letter">
            {{ (note.author?.username?.charAt(0) || 'U').toUpperCase() }}
          </span>
        </div>
        <mat-card-title style="font-weight: bold; font-size: 1.2rem; color: #1976d2; word-break: break-word;">
          {{ note.title }}
        </mat-card-title>
        <mat-card-subtitle style="font-weight: 500; color: #666;">
          Από: {{ $any(note.author)?.username }}
        </mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content style="padding: 0 16px 12px 16px;">
        <p style="
          margin: 0; 
          line-height: 1.5; 
          color: #444; 
          font-size: 1rem;
          word-break: break-word;
          white-space: pre-wrap;
        ">
          {{ note.content }}
        </p>
      </mat-card-content>

      <mat-card-actions style="display: flex; justify-content: space-between; align-items: center; padding: 8px 16px; background: #fafafa; border-top: 1px solid #f5f5f5;">
        <span style="font-size: 0.8rem; color: #888;">
          {{ note.createdAt | date:'dd/MM/yyyy' }}
        </span>

        <div style="display: flex; gap: 4px;">    
          <ng-container *ngIf="isAuthor(note)">
            <button mat-icon-button color="primary" (click)="$event.stopPropagation()" [routerLink]="['/step14-edit-note', note._id]">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="$event.stopPropagation(); deleteNote(note._id!)">
              <mat-icon>delete</mat-icon>
            </button>
          </ng-container>
        </div>
      </mat-card-actions>
    </mat-card>
</div>